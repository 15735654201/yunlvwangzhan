/** * 初始化微信接口注入权限验证 **/function initConfig(callback) {    var appId = '';    var timestamp = '';    var nonceStr = '';    var signature = '';    $.ajax({        type: "POST",        url: ctx + "/jsp/wap/include/wxConfigInit.jsp",        data: {url: window.location.href},        dataType: "json",        async: false,        success: function (data) {            if (data.state == 1) {                appId = data.cont.appId;                timestamp = data.cont.timestamp;                nonceStr = data.cont.nonceStr;                signature = data.cont.signature;            }        }    });    wx.config({        debug: false,        appId: appId,        timestamp: timestamp,        nonceStr: nonceStr,        signature: signature,        jsApiList: [            'checkJsApi',            'onMenuShareTimeline',            'onMenuShareAppMessage',            'onMenuShareQQ',            'onMenuShareWeibo',            'hideMenuItems',            'showMenuItems',            'hideAllNonBaseMenuItem',            'showAllNonBaseMenuItem',            'translateVoice',            'startRecord',            'stopRecord',            'onRecordEnd',            'playVoice',            'pauseVoice',            'stopVoice',            'uploadVoice',            'downloadVoice',            'chooseImage',            'previewImage',            'uploadImage',            'downloadImage',            'getNetworkType',            'openLocation',            'getLocation',            'hideOptionMenu',            'showOptionMenu',            'closeWindow',            'scanQRCode',            'chooseWXPay',            'openProductSpecificView',            'addCard',            'chooseCard',            'openCard'        ]    });    //记载成功时调用    wx.ready(function () {        //js接口验证        wx.checkJsApi({            jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage'], // 需要检测的JS接口列表，所有JS接口列表见附录2,            success: function (res) {                // 以键值对的形式返回，可用的api值true，不可用为false                // 如：{"checkResult":{"chooseImage":true},"errMsg":"checkJsApi:ok"}                if(callback){                    callback();                }            }        });    });    //记载失败时调用    wx.error(function (res) {        //alert(res.errMsg);    });};